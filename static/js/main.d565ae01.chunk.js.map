{"version":3,"sources":["ENSReverse.tsx","App.tsx","index.tsx"],"names":["providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","process","web3Modal","Web3Modal","cacheProvider","logger","css","args","splice","console","log","apply","tooltips","self","net","registrar","reverse","address","resolver","owner","name","params","useParams","useState","setName","web3","setWeb3","titles","setTitles","addrs","setAddrs","tracts","setTracts","loading","setLoading","once","setOnce","toast","useToast","placement","useBreakpointValue","input","useRef","updateAddr","obj","as","updateTract","ts","resolve","useCallback","a","Error","eth","ens","getAddress","useEffect","undefined","setProvider","provider","Web3","on","reset","clearAccount","clearCachedProvider","resetAccount","accts","length","cachedProvider","connect","then","getAccounts","addresses","getChainId","chainId","getOwner","test","registrarContract","Contract","registrarABI","substr","getResolver","reverseResolver","ensEntry","methods","node","call","resolved","title","description","duration","current","focus","alert","message","window","confirm","send","from","forward","parts","domain","split","idx","slice","join","recordExists","part","base","resolverAddress","getTTL","ttl","setSubnodeRecord","to","setAddress","handlers","func","if","some","tract","maxW","action","onSubmit","evt","preventDefault","justify","justifyItems","m","mr","alignSelf","w","textAlign","placeholder","autoFocus","value","ref","onChange","target","templateColumns","alignItems","mt","Object","entries","map","i","key","onCopy","useClipboard","display","sx","bg","hasArrow","label","pr","minW","userSelect","textOverflow","whiteSpace","overflowX","ml","size","onClick","Copy","h","disabled","type","path","component","ENSReverse","ReactDOM","render","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.d565ae01.chunk.js","sourcesContent":["import {\n  useState, useEffect, useRef, useCallback, FormEvent,\n} from 'react'\nimport Web3 from 'web3'\nimport {\n  Stack, Input, Container, Flex, Button, Text, Box,\n  Grid, useClipboard, useToast, Spinner, Tooltip,\n  useBreakpointValue, Placement,\n} from '@chakra-ui/react'\nimport { AbiItem } from 'web3-utils'\nimport { Contract } from 'web3-eth-contract'\nimport { abi as registrarABI } from '@ensdomains/ens-contracts/artifacts/contracts/registry/ReverseRegistrar.sol/ReverseRegistrar.json'\nimport { useParams } from 'react-router-dom'\nimport { CopyIcon } from '@chakra-ui/icons'\nimport Web3Modal from 'web3modal'\nimport WalletConnectProvider from '@walletconnect/web3-provider'\nimport { ReactElement } from 'react'\n\nconst providerOptions = {\n  walletconnect: {\n    package: WalletConnectProvider,\n    options: {\n      infuraId: process.env.REACT_APP_INFURA_ID,\n    },\n  },\n}\n\nconst web3Modal = new Web3Modal({\n  cacheProvider: true,\n  providerOptions,\n})\n\nconst logger = (css: string) => (\n  (...args: unknown[]) => {\n    args[0] = `%c ${args[0]} `\n    args.splice(1, 0, css)\n    console.log.apply(this, args)\n  }\n)\n\ninterface Addresses extends Partial<Record<string, string>> {\n  self?: string\n  address?: string\n  owner?: string\n  reverse?: string\n  net?: string\n  resolver?: string\n  registrar?: string\n  name?: string\n}\n\ninterface Contracts {\n  resolver?: Contract\n  registrar?: Contract\n  reverseResolver?: Contract\n}\n\ninterface Parameters {\n  name?: string\n}\n\nconst tooltips: Record<string, string> = {\n  self: 'This is the address of your wallet. The reverse record is an ENS name that is returned when users search on this address. There is only one reverse record per address.',\n  net: 'The currently selected ethereum chain. In general ENS resolution is done on the mainnet, but instances exist on some of the test chains as well.',\n  registrar: 'This is the contract that controls name registration for the reverse records.',\n  reverse: 'This is a specially formatted address that is used to look up your reverse record.',\n  address: \"The forward resolution for the currently selected name to use for the reverse record. There is no technical requirement that this resolve to your wallet address, but if it doesn't, many implementations will disregard the record.\", \n  resolver: 'This is the contract address for the resolver for the resolution of reverse entries.',\n  owner: 'When you create a reverse entry, you are set as the owner of the reverse address.',\n  name: 'This is the currently configured reverse record for your wallet address.',\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default () => {\n  const params = useParams<Parameters>()\n  const [name, setName] = useState(params.name)\n  const [web3, setWeb3] = useState<Web3 | null>(null)\n  const [titles, setTitles] = useState({\n    self: 'Your Address',\n    net: 'Current Network',\n    registrar: 'Reverse Registrar Address',\n    reverse: 'Reverse Address',\n    resolver: 'Resolver Address',\n    address: null as string | null,\n    owner: 'Reverse Lookup Owner',\n    name: 'Current Reverse',\n  })\n  const [addrs, setAddrs] = useState<Addresses>({})\n  const [tracts, setTracts] = useState<Contracts>({})\n  const [loading, setLoading] = (\n    useState<number | null>(null)\n  )\n  const [once, setOnce] = useState(false)\n  const toast = useToast()\n  const placement = (\n    useBreakpointValue<Placement>(['bottom', 'right'])\n  )\n  const input = useRef<HTMLInputElement | null>(null)\n\n  const updateAddr = (obj: object) => {\n    setAddrs(as => ({ ...as, ...obj }))\n  }\n  const updateTract = (obj: object) => {\n    setTracts(ts => ({ ...ts, ...obj }))\n  }\n\n  const resolve = useCallback(async (name) => {\n    if(!web3) return null\n\n    try {\n      if(!name) throw new Error('Name Not Set')\n      const address = await web3.eth.ens.getAddress(name)\n      updateAddr({ address })\n    } catch(err) {\n      updateAddr({ address: null })\n    }\n  }, [web3])\n\n  useEffect(() => {\n    setTitles((ts) => (\n      { ...ts, address: name ? `${name}'s Address` : null }\n    ))\n    setAddrs((as) => (\n      { ...as, address: undefined }\n    ))\n\n    resolve(name)\n  }, [name, resolve])\n\n  const setProvider = useCallback(\n    async (provider: any) => {\n      const log = logger('color: purple')\n      const web3 = new Web3(provider)\n      setWeb3(web3)\n\n      if(provider.on) {\n        log('Listening to Provider')\n\n        const reset = () => {\n          setAddrs({})\n          setTracts({})\n          setOnce(false)\n        }\n\n        const clearAccount = () => {\n          web3Modal.clearCachedProvider()\n          setWeb3(null)\n          reset()\n        }\n        provider.on('disconnect', clearAccount)\n\n        provider.on('chainChanged', reset)\n\n        const resetAccount = (accts: string[]) => {\n          if(accts.length === 0) {\n            clearAccount()\n          } else {\n            reset()\n          }\n        }\n        provider.on('accountsChanged', resetAccount)\n      }\n    },\n    [],\n  )\n\n  useEffect(() => {\n    if(web3Modal.cachedProvider) {\n      web3Modal.connect().then(setProvider)\n    }\n  }, [setProvider])\n\n  useEffect(() => {\n    (async () => {\n      if(!web3 || once) return null\n\n      setOnce(true)\n\n      const log = logger('color: orange; background-color: purple')\n      const addresses = await web3.eth.getAccounts()\n      const self = addresses[0]\n      log('Wallet Address', self)\n      updateAddr({ self })\n\n      const net = await (async () => {\n        const chainId = await web3.eth.getChainId()\n        switch(chainId) {\n          case 1: return 'mainnet'\n          case 2: return 'Morden'\n          case 3: return 'Ropsten'\n          case 4: return 'Rinkeby'\n          case 42: return 'Kovan'\n          case 100: return 'xDAI'\n          default: return `unknown (id:${chainId})`\n        }\n      })()\n      log('Setting Network Name', net)\n      updateAddr({ net })\n\n      resolve(name)\n\n      let registrar: ReactElement | string = (\n        await web3.eth.ens.getOwner('addr.reverse')\n      )\n      log('Reverse Registrar', registrar)\n      let registrarContract\n      if(!registrar || /^0x0+$/.test(registrar)) {\n        registrar = <em>Error: Couldn't get reverse registrar.</em>\n      } else {\n        registrarContract = new web3.eth.Contract(\n          registrarABI as AbiItem[], registrar\n        )\n        log('Reverse Registrar', registrarContract.options.address)\n        updateTract({ registrar: registrarContract })\n      }\n      updateAddr({ registrar })\n\n      const reverse: string = (\n        `${self.substr(2)}.addr.reverse`\n      )\n      log('Adding Reverse Address', reverse)\n      updateAddr({ reverse })\n\n      let reverseResolver, address\n      if(reverse) {\n        updateAddr({\n          owner: await web3.eth.ens.getOwner(reverse),\n        })\n\n        reverseResolver = await (\n          web3.eth.ens.getResolver(reverse)\n        )\n        updateTract({ reverseResolver })\n\n        address = reverseResolver.options.address\n        updateAddr({ resolver: address })\n      }\n\n      let ensEntry = name\n\n      if(!address || /^0x0+$/.test(address)) {\n        updateAddr({ name: null })\n      } else if(registrarContract && reverseResolver) {\n        const node = await (\n          registrarContract.methods.node(self).call()\n        )\n        const resolved = (\n          (await reverseResolver.methods.name(node).call())\n          ?? null\n        )\n        updateAddr({ name: resolved })\n        if(!name) {\n          ensEntry = resolved\n          setName(resolved)\n          toast({\n            title: 'Set Name',\n            description: (\n              `Defaulting name to current reverse record: \"${resolved}\".`\n            ),\n            duration: 3000,\n          })\n          input.current?.focus()\n        }\n      }\n\n      if(ensEntry) {\n        try {\n          const resolver = await web3.eth.ens.getResolver(ensEntry)\n          updateTract({ resolver })\n        } catch(err) {\n          alert(err.message)\n        }\n      }\n    })()\n  }, [web3, once, name, toast, resolve])\n\n  const connect = async () => {\n    if(!web3) {\n      setProvider(await web3Modal.connect())\n    }\n  }\n\n  const reverse = async () => {\n    if(!name || addrs.name === name) {\n      if(name) {\n        alert(`Reverse Already Set To: ${name}`)\n      }\n      return input.current?.focus()\n    }\n    if(\n      !addrs.name\n      || window.confirm(`Overwrite current reverse: ${addrs.name}?`)\n    ) {\n      if(!tracts.registrar) {\n        throw new Error('Reverse Registrar Contract Not Set')\n      }\n      await (\n        tracts.registrar.methods\n        .setName(name)\n        .send({ from: addrs.self })\n      )\n      setOnce(false) // trigger reevaluation\n    }\n  }\n\n  const forward = async () => {\n    if(!web3) return null\n    if(!addrs.self) throw new Error('Wallet Address Not Set')\n\n    const log = logger(\n      'color: green; background-color: purple; font-size: 150%'\n    )\n    const domain = name ?? ''\n    const parts = domain.split('.')\n    if(parts.length < 2) {\n      throw new Error(`Not Enough Parts In: \"${domain}\"`)\n    } else {\n      let idx\n      for(idx = parts.length; idx >= 1; idx--) {\n        const name = parts.slice(-idx).join('.')\n        log('Checking Name', name)\n        if(await web3.eth.ens.recordExists(name)) {\n          break\n        }\n      }\n      if(idx === 0) {\n        throw new Error(`${domain} is not a supported domain.`)\n      }\n      if(idx === parts.length) {\n        if(window.confirm(`Overwrite current record: ${name}?`)) {\n          --idx\n        } else {\n          return null\n        }\n      }\n      const part = parts.slice(0, -idx).join('.')\n      const base = parts.slice(-idx).join('.')\n      const owner = await web3.eth.ens.getOwner(base)\n      const resolver = await web3.eth.ens.getResolver(base)\n      const resolverAddress = resolver.options.address\n      const ttl = await web3.eth.ens.getTTL(base)\n      log('Writing', {\n        part, base, address: addrs.self,\n        resolverAddress, ttl, owner, resolver,\n      })\n      if(addrs.self !== owner) {\n        alert(`Only the owner of ${base}, ${owner}, can write subdomains.`)\n      } else {\n        await web3.eth.ens.setSubnodeRecord(\n          base, part, addrs.self, resolverAddress, ttl,\n          { from: addrs.self, to: owner },\n        )\n        await web3.eth.ens.setAddress(\n          domain, addrs.self, { from: addrs.self }\n        )\n        setOnce(false)\n      }\n    }\n  }\n\n  const handlers = [\n    {\n      name: 'Connect Ethereum Wallet',\n      func: connect,\n      if: () => (!addrs.self),\n    },\n    {\n      name: name ? (\n        `Set ${name} As Reverse`\n      ) : (\n        'Enter A Name To Use As Reverse'\n      ),\n      func: reverse,\n      if: () => (\n        !name\n        || ![\n          name, addrs.name, tracts.registrar,\n        ].some(tract => tract === undefined)\n      )\n    },\n    {\n      name: name ? (\n        `Set A Forward Record For ${name}`\n      ) : (\n        'Enter A Name To Use Set'\n      ),\n      func: forward,\n      if: () => (\n        !name\n        || ![\n          name, addrs.self,\n        ].some(tract => tract === undefined)\n      )\n    }\n  ]\n\n  return (\n    <Container\n      maxW=\"100%\" as=\"form\" action=\"#\"\n      onSubmit={(evt: FormEvent) => {\n        evt.preventDefault()\n        if(!web3) {\n          connect()\n        } else {\n          reverse()\n        }\n      }}\n    >\n      <Stack>\n        <Flex justify=\"center\" justifyItems=\"center\">\n          <Text m={0} mr={2} alignSelf=\"center\">\n            ENS Name For Reverse Record:\n          </Text>\n          <Input\n            w=\"auto\" textAlign=\"center\"\n            placeholder=\"Exe: sample.ens.eth\"\n            autoFocus value={name ?? ''} ref={input}\n            onChange={(evt) => {\n              setName(evt.target.value)\n            }}\n          />\n        </Flex>\n        <Grid\n          templateColumns={['auto', 'auto 1fr']}\n          alignItems=\"center\" maxW=\"100vw\" mt={3}\n        >\n          {Object.entries(titles).map(([key, title], i) => {\n            const { onCopy } = useClipboard(addrs[key] ?? '')\n            if(!title) return null\n            return (\n              <Box\n                key={i} display=\"contents\"\n                sx={{ '&:hover > *': { bg: '#FBFF0522' } }}\n              >\n                <Tooltip\n                  hasArrow placement={placement}\n                  label={tooltips[key]}\n                >\n                  <Text\n                    textAlign={['left', 'right']}\n                    m={0} pr={5} minW=\"12em\"\n                    userSelect=\"none\"\n                  >\n                    {title}:\n                  </Text>\n                </Tooltip>\n                <Text\n                  m={0} textOverflow=\"clip\" whiteSpace=\"nowrap\"\n                  title={addrs[key]} overflowX=\"hidden\" ml={[5, 0]}\n                >\n                  {addrs[key] && (\n                    <Button\n                      title=\"Copy\" mr={2} size=\"xs\"\n                      onClick={() => {\n                        onCopy()\n                        toast({\n                          title: 'Value Copied',\n                          duration: 1500,\n                        })\n                      }}\n                    >\n                      <CopyIcon/>\n                    </Button>\n                  )}\n                  <code>\n                    {addrs[key] === null ? (\n                      <em>Unset</em>\n                    ) : (\n                      addrs[key]\n                    )}\n                  </code>\n                </Text>\n              </Box>\n            )\n          })}\n        </Grid>\n      </Stack>\n      <Stack mt={3}>\n        {handlers.map((h, i) => (\n          <Button\n            key={i}\n            disabled={!!loading || (h.if ? !h.if() : false)}\n            m={0} mt=\"0 ! important\"\n            onClick={async () => {\n              try {\n                setLoading(i)\n                await h.func()\n              } catch(err) {\n                alert(err.message)\n              } finally {\n                setLoading(null)\n              }\n            }}\n          >\n            {loading === i && (\n              <Spinner size=\"sm\" mr={3}/>\n            )}\n            {h.name}\n          </Button>\n        ))}\n        <Input type=\"submit\" display=\"none\"/>\n      </Stack>\n    </Container>\n  )\n}","import {\n  HashRouter as Router, Switch, Route,\n} from 'react-router-dom'\nimport ENSReverse from './ENSReverse'\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default () => (\n  <Router>\n    <Switch>\n      <Route path='/:name?' component={ENSReverse}/>\n    </Switch>\n  </Router>\n)","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { ChakraProvider } from \"@chakra-ui/react\"\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ChakraProvider>\n      <App />\n    </ChakraProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)"],"sourceRoot":""}